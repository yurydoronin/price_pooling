[![Build Status](https://travis-ci.org/yurydoronin/price_pooling.svg?branch=master)](https://travis-ci.org/yurydoronin/price_pooling)	
[![codecov](https://codecov.io/gh/yurydoronin/price_pooling/branch/master/graph/badge.svg)](https://codecov.io/gh/yurydoronin/price_pooling)	
	
# Тестовое задание компании CSI

Используя язык Java, необходимо написать метод объединения имеющихся цен с вновь импортированными из внешней системы. Также необходимо написать unit-тесты для проверки хотя бы некоторых возможных вариантов.
	
Каждый продаваемый товар имеет свою цену. Цен у товара может быть несколько, каждая цена имеет свой номер, принадлежность к отделу, период действия и значение в валюте. 

В базе данных для каждого товара хранится история цен. В один момент времени может действовать только одна цена из цен с одинаковым номером и отделом. Обычно товар продается по первой цене. Вторая, третья и четвертая цены могут использоваться для применения скидок (если срабатывает условие скидки. Товар будет продан по цене номер 2). Касса может обслуживать какой-то отдел, тогда при продаже она будет использовать цены, указанные для этого отдела.

Правила объединения цен:

- если товар еще не имеет цен, или имеющиеся цены не пересекаются в периодах действия с новыми, то новые цены просто добавляются к товару;
- если имеющаяся цена пересекается в периоде действия с новой ценой, то:
- если значения цен одинаковы, период действия имеющейся цены увеличивается согласно периоду новой цены;
- если значения цен отличаются, добавляется новая цена, а период действия старой цены уменьшается согласно периоду новой цены.

Входные параметры метода:

- коллекцию имеющихся цен;
- коллекцию новых цен.

Метод должен вернуть коллекцию объединенных цен для дальнейшего сохранения в БД.

Пример полей класса «цена»:

	long id; - идентификатор в БД 
	String product_code; - код товара
	int number; - номер цены
	int depart; - номер отдела
	Date begin; - начало действия
	Date end; - конец действия
	long value; - значение цены в копейках

![Image alt](https://github.com/yurydoronin/price_pooling/raw/master/pic.png)



